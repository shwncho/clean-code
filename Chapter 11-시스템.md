# 11장 시스템

- 도시를 세운다면?
    - 깨끗한 코드를 구현하면 낮은 추상화 수준에서 관심사를 분리하기 쉬워진다.

&nbsp;

- 시스템 제작과 시스템 사용을 분리하라
    - 제작과 사용은 아주 다르다.
    - 설정 논리는 일반 실행 논리와 분리해야 모듈성이 높아진다.
    
    - Main 분리
        - main()에서 생성 분리    
    - 팩토리
        - 팩토리로 생성 분리
    
    - 의존성 주입
        - 사용과 제작을 분리하는 강력한 메커니즘
        - 진정한 의존성 주입은 클래스가 의존성을 해결하려 시도하지 않는다.
            - 클래스는 완전히 수동적
            - ex) 스프링 DI 컨테이너

&nbsp;

- 확장
    - 횡단관심사
        - AOP는 횡단 관심사에 대처해 모듈성을 확보하는 일반적인 방법론이다.

&nbsp;

- 자바 프록시
    - 프록시를 사용하면 깨끗한 코드를 작성하기 어렵다

&nbsp;

- 순수 자바 AOP 프레임워크
    - 프록시 코드는 도구로 자동화할 수 있다.
    - 스프링은 비즈니스 논리를 POJO로 구현한다.
        - POJO는 순수하게 도메인에  초점을 맞춘다.
    
        - 클라이언트는 Bank 객체에서 getAccounts()를 호출한다고 믿지만 실제로는 Bank POJO의 기본 동작을 확장한 중첩 DECORATOR 객체 집합의 가장 외곽과 통신한다.

&nbsp;

- AspectJ관점
    - 관심사를 관점으로 분리하는 가장 강력한 도구는 AspectJ 언어다.

&nbsp;

- 테스트 주도 시스템 아키텍처 구축
    - 소프트웨어 구조가 관점을 효과적으로 분리한다면, 극적인 변화가 경제적으로 가능하다.
    - 코드 수준에서 아키텍처 관심사를 분리할 수 있다면 진정한 테스트 주도 아키텍처 구축이 가능해진다.

&nbsp;

- 의사 결정을 최적화하라
    - 가능한 마지막 순간까지 결정을 미루는 방법이 최선
        - 최대한 정보를 모아 최선의 결정을 내리기 위해서

&nbsp;

- 명백한 가치가 있을 때 표준을 현명하게 사용하라

&nbsp;

- 시스템은 도메인 특화 언어가 필요하다
    - 도메인 특화 언어를 사용하면 고차원 정책에서 저차원 세부사항에 이르기까지 모든 추상화 수준과 모든 도메인을 POJO로 표현할 수 있다.

&nbsp;

- 결론
    - 모든 추상화 단계에서 의도는 명확히 표현해야한다.
    - POJO를 작성하고 관점 혹은 관점과 유사한 메커니즘을 사용해 각 구현 관심사를 분리해야 한다.
    - 실제로 **돌아가는 가장 단순한 수단을 사용해야 한다**